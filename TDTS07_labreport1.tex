
%%% Local Variables: 
%%% mode: latex
%%% TeX-master: t
%%% End: 

\documentclass[12pt]{article}
\usepackage{graphicx}
\usepackage[T1]{fontenc}		% För svenska bokstäver
\usepackage[swedish]{babel}
\title{TDTS07 Lab-report 1}
\author{Nora Björklund and Christopher Hallberg}
\begin{document}
\maketitle
\section{Trafficlight}
The traffic light consists of four sensors which are connected to a
controller that can at the right moment give a green signal on a
light where a car is waiting. The cars are generated from an input
file which is read by the car generator, input_gen. Which car is
granted green light is read by the monitor that writes to an output
file.
\subsection{input_gen}
The input generator simply reads a text document and inputs cars from
north, south, east or west. The format of the input file is the
letters W, E, S, or N followed by a space and then a time value in
seconds and finally completed with a newline. The letter indicates 
from what direction a car arrives and 
the time value indicates how many seconds after the previous car a new 
one will be generated.
\subsection{sensor}
The sensor detects when a car have arrived at its trafficlight and
sends a signal to the controller that it has a car waiting. There is
one sensor per direction.
The sensors has an SC_THREAD with a loop checking if there is a new
car every 50 millisecond, any signal shorter than that is considered a
glitch. If it detects a new car it raises an event
which is detected by an SC_METHOD. This method inverts an internal
signal and puts it on the output for the controller. That is, both
falling and rising edge of the signal between the sensors and
controller indicates a new car.
\subsection{controller}
The controller is the unit which decides what directions should be
green. It is connected to the four sensors from which it receives
signals telling it if new cars have arrived. There are four
SC_METHODs, one for each direction, which are sensitive to signals
from the respective sensors. When a car is detected by a method a
variable is set to indicate that a car is waiting at a specific light.

\subsection{monitor}
\section{Tests}
To verify that our traffic light is correct two different simulations
have been executed. One to verify that every car is granted passage
and one to see that a single car from one direction can dissapear when
many arrives from another.  
\end{document}